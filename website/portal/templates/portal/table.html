{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predictor</title>
    <link rel="stylesheet" href="{% static 'portal/styles/charts.css' %}">

</head>
<body>
    <div class="header">
        <h1>JEE Analytics</h1>
        <span class="menu-toggle">â˜°</span>
        <ul>
            <li ><a href="/portal">Home</a></li>
            <li><a href="/portal/charts">Charts</a></li>
            <li class="active"><a href="/portal/predict">Branch Predictor</a></li>
            <li id="last"><a href="/portal/contact">Contact Us</a></li>
        </ul>
    </div>
    <script>
      document.querySelector('.menu-toggle').addEventListener('click', function() {
        document.querySelector('.header').classList.toggle('show-menu');
      });
    </script>
    <!--
      <section class="hero">
        <form method = 'GET' action = "{% url 'predict' %}">
            <div class="container-year">
                <div class="dropdown">
                  <div class="dropdown-box">
                      <label for="category" class="name">Category :</label>
                      <input type="text" placeholder = "All" class="selected-option" readonly />
                      <span class="arrow">&#9660;</span>
                  </div>
                  <div class="dropdown-menu">
                          <a href="#" class="selected">All</a>
                          {% for year in category_values %}
                          <option value="{{year}}" {% if value == request.GET.category %}selected{% endif %}>{{ year }}</option>
                          {% endfor %}
                  </div>
                  </div>
                  

                  <div class="dropdown">
                    <div class="dropdown-box">
                        <label for="gender" class="name">Gender :</label>
                        <input type="text" placeholder = "All" class="selected-option" readonly />
                        <span class="arrow">&#9660;</span>
                    </div>
                    <div class="dropdown-menu">
                            <a href="#" class="selected">All</a>
                            {% for year in gender_values %}
                            <option value="{{year}}" {% if value == request.GET.gender %}selected{% endif %}>{{ year }}</option>
                            {% endfor %}
                    </div>
                  </div>
                    

                  <div class="dropdown">
                    <div class="dropdown-box">
                        <label for="institute" class="name">Institute :</label>
                        <input type="text" placeholder = "All" class="selected-option" readonly />
                        <span class="arrow">&#9660;</span>
                    </div>
                    <div class="dropdown-menu">
                            <a href="#" class="selected">All</a>
                            {% for year in institute_values %}
                            <option value="{{year}}" {% if value == request.GET.institute %}selected{% endif %}>{{ year }}</option>
                            {% endfor %}
                    </div>
                  </div>
                  <br>


                  <div class="dropdown">
                    <div class="dropdown-box">
                        <label for="year" class="name">Year :</label>
                        <input type="text" placeholder = "All" class="selected-option" readonly />
                        <span class="arrow">&#9660;</span>
                    </div>
                    <div class="dropdown-menu">
                            <a href="#" class="selected">All</a>
                            {% for year in year_values %}
                            <option value="{{year}}" {% if value == request.GET.year %}selected{% endif %}>{{ year }}</option>
                            {% endfor %}
                    </div>
                  </div>
                  <br>


                  <div class="dropdown">
                    <div class="dropdown-box">
                        <label for="quota" class="name">Quota :</label>
                        <input type="text" placeholder = "All" class="selected-option" readonly />
                        <span class="arrow">&#9660;</span>
                    </div>
                    <div class="dropdown-menu">
                      <select id="category" name="category">
                            <a href="#" class="selected">All</a>
                            {% for year in quota_values %}
                            <option value="{{year}}" {% if value == request.GET.quota %}selected{% endif %}>{{ year }}</option>
                            {% endfor %}
                      </select>
                    </div>
                  </div>
                  <br>


                  <div class="dropdown">
                    <div class="dropdown-box">
                        <label for="program" class="name">Program :</label>
                        <input type="text" placeholder = "All" class="selected-option" readonly />
                        <span class="arrow">&#9660;</span>
                    </div>
                    <div class="dropdown-menu">
                      <select id="program" name="program">
                            <a href="#" class="selected">All</a>
                            {% for year in program_values %}
                            <option value="{{year}}" {% if value == request.GET.program %}selected{% endif %}>{{ year }}</option>
                            {% endfor %}
                      </select>
                    </div>
                  </div>
            </div>
          <button type="submit">Apply Filters</button> 
        </form>
    </section>
    -->
    
    <form method="GET" action="{% url 'predict' %}" style = "margin-top: 150px">
      <div class="container-year">
          <div class="dropdown">
              <label for="category" class="dropdown-box">Category:</label>
              <select id="category" name="category" class="dropdown-menu">
                  <option value="">Select</option>
                  {% for value in category_values %}
                      <option value="{{ value }}" {% if value == request.GET.category %}selected{% endif %}>{{ value }}</option>
                  {% endfor %}
              </select>
              <br>
          </div>
          

          <div class="dropdown">
              <label for="gender" class="dropdown-box">Gender:</label>
              <select id="gender" name="gender" class="dropdown-menu">
                  <option value="">Select</option>
                  {% for value in gender_values %}
                      <option value="{{ value }}" {% if value == request.GET.gender %}selected{% endif %}>{{ value }}</option>
                  {% endfor %}
              </select>
              <br>
          </div>
          

          <div class="dropdown">
              <label for="institute" class="dropdown-box">Institute:</label>
              <select id="institute" name="institute" class="dropdown-menu">
                  <option value="">Select</option>
                  {% for value in institute_values %}
                      <option value="{{ value }}" {% if value == request.GET.institute %}selected{% endif %}>{{ value }}</option>
                  {% endfor %}
              </select>
              <br>
          </div>
          

          <div class="dropdown">
              <label for="program" class="dropdown-box">Program:</label>
              <select id="program" name="program" class="dropdown-menu">
                  <option value="">Select</option>
                  {% for value in program_values %}
                      <option value="{{ value }}" {% if value == request.GET.program %}selected{% endif %}>{{ value }}</option>
                  {% endfor %}
              </select>
              <br>
          </div>
          

          <div class="dropdown">
              <label for="year" class="dropdown-box">Year:</label>
              <select id="year" name="year" class="dropdown-menu">
                  <option value="">Select</option>
                  {% for value in year_values %}
                      <option value="{{ value }}" {% if value == request.GET.year %}selected{% endif %}>{{ value }}</option>
                  {% endfor %}
              </select>
              <br>
          </div>
          

          <div class="dropdown">
            <label for="quota" class="dropdown-box"> Quota:</label>
            <select id="quota" name="quota" class="dropdown-menu">
                <option value="">Select</option>
                {% for value in quota_values %}
                    <option value="{{ value }}" {% if value == request.GET.quota %}selected{% endif %}>{{ value }}</option>
                {% endfor %}
            </select>
            <br>
          </div>
          <button type="submit" id="lb">Apply Filters</button>
      </div>
  </form>

  <div class="apply">
    <button id="ab" onclick="getTable()">View</button>
  </div>
  
  
  <!--
      <script>
        // Select all dropdown elements
        const dropdowns = document.querySelectorAll('.dropdown');
    
        // Loop over each dropdown element
        dropdowns.forEach((dropdown) => {
          // Select the relevant elements for this dropdown
          const dropdownBox = dropdown.querySelector('.dropdown-box');
          const dropdownMenu = dropdown.querySelector('.dropdown-menu');
          const dropdownArrow = dropdown.querySelector('.arrow');
          const selectedOption = dropdown.querySelector('.selected-option');
    
          // Add an event listener to each option in the dropdown menu
          const options = dropdown.querySelectorAll('.dropdown-menu a');
          options.forEach((option) => {
            option.addEventListener('click', (event) => {
              // Update the value of the selected-option element
              selectedOption.value = event.target.textContent;
    
              // Remove the selected class from all options
              options.forEach((option) => {
                option.classList.remove('selected');
              });
    
              // Add the selected class to the clicked option
              event.target.classList.add('selected');
    
              // Close the dropdown menu
              dropdownMenu.classList.remove('show');
            });
          });
  
          const joptions = dropdown.querySelectorAll('.dropdown-menu option');
          joptions.forEach((joption) => {
            joption.addEventListener('click', (event) => {
              // Update the value of the selected-option element
              selectedOption.value = event.target.textContent;
    
              // Remove the selected class from all options
              joptions.forEach((joption) => {
                joption.classList.remove('selected');
              });
    
              // Add the selected class to the clicked option
              event.target.classList.add('selected');
    
              // Close the dropdown menu
              dropdownMenu.classList.remove('show');
            });
          });
    
          // Add an event listener to the dropdown box
          [selectedOption, dropdownArrow].forEach((element) => {
            element.addEventListener('click', () => {
              dropdownMenu.classList.toggle('show');
            });
          });
        });
    
        window.addEventListener('click', (event) => {
          if (!event.target.matches('.selected-option') && !event.target.matches('.arrow')) {
            const allDropdownMenus = document.querySelectorAll('.dropdown-menu');
            allDropdownMenus.forEach((menu) => {
              if (menu.classList.contains('show')) {
                menu.classList.remove('show');
              }
            });
          }
        });
    </script>
  -->
    
    <div class="table-container">
        <table id="data-table">
          
        </table>
    
        <script>
            async  function getTable(){
            try{
               const response = await  fetch('{% static 'portal/data/df.csv' %}');
               const data = await response.text();
               console.log(data);
               
               const rows = data.split('\n');
               const table =document.getElementById('data-table');
               table.style.display = 'table';
     
               table.innerHTML = '';
     
               rows.forEach(row => {
                const cells = row.split(',');
                const tableRow = document.createElement('tr');
                
     
                cells.forEach(cell => {
                    const tableCell = document.createElement('td');
                    tableCell.textContent = cell;
                    tableRow.appendChild(tableCell);
                });
     
                table.appendChild(tableRow);
               });
              } catch (error) {
                console.log(error);
              }
            }
     
        </script>
     
        <div class="pagination">
          <button id="btn-first" class="pagination-button">&lt;&lt;</button>
          <button id="btn-prev" class="pagination-button">&lt;</button>
          <div id="pagination-numbers"></div>
          <button id="btn-next" class="pagination-button">&gt;</button>
          <button id="btn-last" class="pagination-button">&gt;&gt;</button>
        </div>
      </div>
    
</body>
</html>